# AWS for Fluent Bit Configuration
# Sends logs to CloudWatch Logs

cloudWatchLogs:
  enabled: true
  region: ${region}
  logGroupName: /aws/eks/${cluster_name}/logs
  logStreamPrefix: fluentbit-
  autoCreateGroup: true

firehose:
  enabled: false

kinesis:
  enabled: false

elasticsearch:
  enabled: false

# Filter configuration
filters: |
  [FILTER]
      Name kubernetes
      Match kube.*
      Merge_Log On
      Keep_Log Off
      K8S-Logging.Parser On
      K8S-Logging.Exclude On

# Output configuration
outputs: |
  [OUTPUT]
      Name cloudwatch_logs
      Match kube.*
      region ${region}
      log_group_name /aws/eks/${cluster_name}/logs
      log_stream_prefix fluentbit-
      auto_create_group true

resources:
  limits:
    memory: 250Mi
  requests:
    cpu: 50m
    memory: 100Mi

tolerations:
  - operator: Exists
    effect: NoSchedule
